# Trabuddy 시퀀스 다이어그램

이 폴더는 Trabuddy 협업 여행 계획 서비스의 주요 기능별 시퀀스 다이어그램을 포함합니다.

## 📁 폴더 구조

```
docs/sequence_diagrams/
├── README.md                    # 이 파일
├── images/                      # 생성된 PNG 이미지들
├── user_authentication.md      # 사용자 인증 시퀀스
├── tour_search.md              # 여행지 검색 시퀀스
├── plan_management.md          # 플랜 관리 시퀀스
└── schedule_management.md      # 일정 관리 시퀀스
```

## 🖼️ 다이어그램 이미지 생성

### 자동 이미지 생성

```bash
# 모든 시퀀스 다이어그램을 PNG 이미지로 변환
npm run generate:diagrams
```

이 명령어는 다음과 같은 작업을 수행합니다:

- 모든 마크다운 파일에서 Mermaid 다이어그램 추출
- 각 다이어그램을 개별 PNG 파일로 변환
- `docs/sequence_diagrams/images/` 폴더에 저장

### 생성된 이미지 파일명 규칙

- `{파일명}_{순번}.png` 형식
- 예: `user_authentication_1.png`, `tour_search_2.png`

### 이미지 활용

생성된 이미지들은 다음과 같이 활용할 수 있습니다:

1. **프레젠테이션**: 기획서나 발표 자료에 직접 삽입
2. **문서화**: 개발 문서나 가이드에 이미지로 첨부
3. **공유**: GitHub에서 렌더링되지 않는 환경에서 이미지로 공유
4. **디자인**: UI/UX 디자인 시 플로우 참고 자료

## 📋 다이어그램 설명

### 1. [사용자 인증](./user_authentication.md)

- **회원가입 시퀀스**: Firebase를 통한 계정 생성 과정
- **로그인 시퀀스**: 인증 및 사용자 정보 조회 과정
- **자동 로그인 시퀀스**: 페이지 새로고침 시 인증 상태 복구
- **로그아웃 시퀀스**: 안전한 로그아웃 처리
- **프로필 수정 시퀀스**: 사용자 정보 업데이트 과정

### 2. [여행지 검색](./tour_search.md)

- **지역별 검색 시퀀스**: 시/도, 시/구/군 선택을 통한 검색
- **키워드 검색 시퀀스**: 디바운싱과 함께하는 실시간 검색
- **상세 정보 조회**: 여행지 상세 정보 캐싱 및 표시
- **지도 마커 클릭**: 지도 상호작용 처리
- **플랜에 추가**: 검색된 여행지를 플랜에 추가하는 과정
- **페이징 처리**: 대량 검색 결과의 효율적 처리

### 3. [플랜 관리](./plan_management.md)

- **플랜 생성**: 새로운 여행 플랜 생성 과정
- **플랜 수정**: 권한 확인 후 플랜 정보 업데이트
- **초대 링크 생성**: 플랜 공유를 위한 초대 링크 생성
- **플랜 참여**: 초대 링크를 통한 플랜 참여 과정
- **참여자 관리**: 권한 변경 및 추방 기능
- **플랜 삭제**: 안전한 플랜 삭제 처리

### 4. [일정 관리](./schedule_management.md)

- **여행지 추가**: 플랜에 새로운 여행지 추가
- **방문 일정 설정**: 달력을 통한 방문 날짜 설정
- **방문 시간 설정**: 도착/출발 시간 설정
- **순서 변경**: 드래그&드롭을 통한 여행지 순서 조정
- **여행지 제거**: 플랜에서 여행지 제거
- **자동 최적화**: AI 기반 일정 최적화

## 🎯 시퀀스 다이어그램 활용법

### 개발자를 위해

- **API 설계**: 각 기능의 API 호출 순서와 데이터 흐름 파악
- **상태 관리**: Pinia Store 간의 데이터 흐름과 상태 변화 이해
- **오류 처리**: 각 단계별 오류 시나리오와 처리 방법 확인
- **성능 최적화**: API 호출 패턴과 캐싱 전략 분석

### 기획자를 위해

- **사용자 플로우**: 각 기능의 상세한 사용자 여정 확인
- **예외 상황**: 오류 케이스와 사용자 경험 개선점 파악
- **권한 설계**: 각 기능별 사용자 권한과 접근 제어 확인
- **비즈니스 로직**: 복잡한 기능의 단계별 처리 과정 이해

### QA를 위해

- **테스트 시나리오**: 각 시퀀스별 상세 테스트 케이스 작성
- **경계 조건**: 오류 상황과 예외 처리 테스트 포인트 식별
- **통합 테스트**: 여러 컴포넌트 간 상호작용 테스트 계획
- **사용자 시나리오**: 실제 사용 패턴 기반 테스트 시나리오

### UI/UX 디자이너를 위해

- **로딩 상태**: 각 단계별 로딩 및 피드백 UI 설계 포인트
- **오류 메시지**: 다양한 오류 상황별 사용자 안내 메시지
- **상호작용 플로우**: 사용자 액션과 시스템 응답의 연결점
- **접근성**: 권한별 UI 표시/숨김 요구사항

## 📝 다이어그램 표기법

### 참여자 (Participants)

- **👤 사용자**: 시스템을 사용하는 실제 사용자
- **🖥️ 클라이언트**: Vue.js 프론트엔드 애플리케이션
- **📦 Store**: Pinia 상태 관리 스토어
- **🌐 Service**: API 서비스 레이어
- **🔥 Firebase**: 외부 Firebase 서비스
- **🗺️ API**: 외부 여행지/지도 API

### 메시지 타입

- **실선 화살표** (`->>)`): 동기 메시지 (응답 대기)
- **점선 화살표** (`-->)`): 비동기 메시지 (응답 비대기)
- **실선 박스**: 조건부 실행 (alt, opt)
- **점선 박스**: 참고 사항 (Note)

### 조건문과 반복문

- **alt**: 조건분기 (if-else)
- **opt**: 선택적 실행 (optional)
- **loop**: 반복 실행
- **par**: 병렬 실행

## 🔄 업데이트 가이드라인

이 시퀀스 다이어그램들은 다음과 같은 경우에 업데이트됩니다:

### 신규 기능 추가

- 새로운 기능의 시퀀스 다이어그램 추가
- 기존 기능과의 연동점 명시
- 새로운 참여자나 서비스 추가

### 기존 기능 수정

- API 호출 순서나 데이터 흐름 변경
- 새로운 오류 처리 로직 추가
- 권한 체계 변경사항 반영

### 성능 개선

- 캐싱 전략 변경사항
- API 호출 최적화 내용
- 비동기 처리 개선사항

## 🛠️ 기술적 특징

### 상태 관리

- **Pinia Stores**: 중앙집중식 상태 관리
- **실시간 동기화**: 여러 컴포넌트 간 상태 공유
- **지속성**: 페이지 새로고침 시 상태 유지

### API 통신

- **RESTful API**: 표준 HTTP 메서드 사용
- **오류 처리**: 통일된 오류 응답 형식
- **토큰 인증**: Bearer 토큰 기반 인증

### 사용자 경험

- **로딩 상태**: 모든 비동기 작업에 로딩 표시
- **오류 피드백**: 명확하고 도움이 되는 오류 메시지
- **권한 기반 UI**: 사용자 권한에 따른 동적 UI

### 보안

- **권한 검증**: 클라이언트와 서버 양쪽 권한 확인
- **입력 검증**: 모든 사용자 입력에 대한 검증
- **토큰 관리**: 안전한 토큰 저장과 갱신

## 📞 문의사항

시퀀스 다이어그램 관련 문의사항이나 수정 요청은 개발팀에 문의해주세요.

### 관련 문서

- [유즈케이스 다이어그램](../use_case_diagrams/README.md)
- [API 문서](../../api/README.md) (예정)
- [컴포넌트 가이드](../../components/README.md) (예정)
